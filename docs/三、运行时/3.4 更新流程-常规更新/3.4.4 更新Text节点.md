# 3.4.4 更新**Text节点**

Text 节点更新是指在的 `patch` 过程中，当新旧两个 VNode 的类型均为 `Text` （已经通过了节点复用）且它们承载的文本内容（`children`）发生变化时，渲染器对真实 DOM 文本节点进行精确修改的操作。

注：**Text节点一定是叶子节点（没有children），不需要继续递归**

## 基本实现

- 修改原processText方法

```tsx
// packages\runtime-core\src\renderer.ts
function processText(n1: VNode | null, n2: VNode, container: HostElement) {
    if (!n1) { // 挂载
        const { children } = n2
        const textDom = (n2.el = hostCreateText(children as string)!)
        hostInsert(textDom, container)
    } else { // 更新 （没有孩子了不需要继续递归patch）
        const el = (n2.el = n1.el!) // 复用el，因为类型是一致的，只是里面的标签包含的内容不一致
        if (n1.children !== n2.children) {
            hostSetElementText(el as HostElement, n2.children as string)
        }
    }
}
```