# 1.2 模块初始化

## 初始化子包

Monorepo下初始化各各模块，这里**以Reactivity为例子，其他runtime 、compiler 也是同理**

- 在packages下新建目录reactivity **并初始化**

```bash
cd packages/reactivity
pnpm init
```

- **修改 `packages/reactivity/package.json`：**把包名改成你的专属域（Scope），并设置**模块格式**。

```bash
{
  "name": "@mini-vue/reactivity", # 标识
  "version": "1.0.0",
  "main": "index.js", #CommonJS模式下包的入口
  "module": "dist/reactivity.esm-bundler.js", # ES Module 指向的入口
  "buildOptions": { # 这个可以不写，官方使用这个的目的是构建多种打包格式
    "name": "VueReactivity",
    # 打包工具（Vite/Webpack）用的 #  Node.js 用的 # 浏览器 <script> 标签用的
    "formats": ["esm-bundler", "cjs", "global"]
  }
}
```

- 创建入口文件 `packages/reactivity/src/index.ts`

```bash
# packages/reactivity/src/index.ts 这里写一个简单的测试文件
export function hello() {
    return "hello miniVue"
}
```

## 测试环境

测试文件全部写到对应文件夹中的**__tests__**文件夹中

- 创建测试文件 `packages/reactivity/__tests__/index.spec.ts` 这里简单以`index.spec.ts`文件进行测试，后期需要规范会对测试文件命名测试

```bash
import { describe, it, expect } from 'vitest';
import { hello } from '@mini-vue/reactivity';

describe('reactivity/index', () => {
    expect(hello()).toBe("hello miniVue")
});
```

- 回到根目录，运行测试

```bash
npx vitest
```